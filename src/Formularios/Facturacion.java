/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package Formularios;

import Clases.Clientes;
import Clases.ModeloClientes;
import Clases.ModeloPaquetes;
import Clases.ModeloReceptores;
import Clases.ModeloTransporte;
import Clases.Paquetes;
import Clases.Receptores;
import Clases.Transporte;
import com.mysql.cj.xdevapi.Statement;
import java.awt.Color;
import java.awt.Dimension;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author test
 */
public class Facturacion extends javax.swing.JFrame {

    /**
     * Creates new form Facturacion
     */
    public Facturacion() {
        initComponents();
        CargarClientes();
        llenarPaquetes();
        llenarTransporte();
        cargarReceptores();
        
        this.setSize(new Dimension(800, 600));
        this.setTitle("Facturacion");
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        cbxVehiculo = new javax.swing.JComboBox<>();
        cbxCliente = new javax.swing.JComboBox<>();
        buscarCliente = new javax.swing.JTextField();
        btnAnadir = new javax.swing.JButton();
        btnBuscar_Cliente = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        Descuento = new javax.swing.JTextField();
        Subtotal1 = new javax.swing.JTextField();
        total_pagar = new javax.swing.JTextField();
        efectivo = new javax.swing.JTextField();
        Cambio = new javax.swing.JTextField();
        btnCalcular_Cambio = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        cbxPaquete = new javax.swing.JComboBox<>();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        Lista_objetos = new javax.swing.JTextArea();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblEnvio = new javax.swing.JTable();
        jLabel7 = new javax.swing.JLabel();
        cbxReceptoresdireccion = new javax.swing.JComboBox<>();
        Enviar = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        mnusuario = new javax.swing.JMenu();
        mnitemusuario = new javax.swing.JMenuItem();
        mnpaquete = new javax.swing.JMenu();
        mnitempaquete = new javax.swing.JMenuItem();
        jMenu3 = new javax.swing.JMenu();
        mnitemreceptor = new javax.swing.JMenuItem();
        jMenu4 = new javax.swing.JMenu();
        mnitemcliente = new javax.swing.JMenuItem();
        mntransporte = new javax.swing.JMenu();
        mnitemtransporte = new javax.swing.JMenuItem();
        mnequipo = new javax.swing.JMenu();
        mnitemequipo = new javax.swing.JMenuItem();
        mnsucursal = new javax.swing.JMenu();
        mnitemsucursal = new javax.swing.JMenuItem();
        mnconductor = new javax.swing.JMenu();
        mniemconductor = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        jRadioButtonMenuItem2 = new javax.swing.JRadioButtonMenuItem();
        jMenu1 = new javax.swing.JMenu();
        jCheckBoxMenuItem2 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem3 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem5 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem7 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem8 = new javax.swing.JCheckBoxMenuItem();
        consultatransporte = new javax.swing.JCheckBoxMenuItem();
        consultaconductores = new javax.swing.JCheckBoxMenuItem();
        Consultaempleados = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem11 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem12 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem10 = new javax.swing.JCheckBoxMenuItem();
        jCheckBoxMenuItem1 = new javax.swing.JCheckBoxMenuItem();
        jRadioButtonMenuItem1 = new javax.swing.JRadioButtonMenuItem();
        mnsalir = new javax.swing.JMenu();
        mnitemsalir = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel3.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel3.setText("Cliente:");
        getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 110, -1, -1));

        jLabel4.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel4.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel4.setText("Dirección:");
        getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 200, -1, -1));

        cbxVehiculo.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        cbxVehiculo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione vehiculo:" }));
        cbxVehiculo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxVehiculoActionPerformed(evt);
            }
        });
        getContentPane().add(cbxVehiculo, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 170, 160, -1));

        cbxCliente.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        cbxCliente.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione cliente:" }));
        cbxCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxClienteActionPerformed(evt);
            }
        });
        getContentPane().add(cbxCliente, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 110, 160, -1));

        buscarCliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buscarClienteActionPerformed(evt);
            }
        });
        getContentPane().add(buscarCliente, new org.netbeans.lib.awtextra.AbsoluteConstraints(380, 110, 170, -1));

        btnAnadir.setBackground(new java.awt.Color(153, 204, 255));
        btnAnadir.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        btnAnadir.setText("Mostrar");
        btnAnadir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAnadirActionPerformed(evt);
            }
        });
        getContentPane().add(btnAnadir, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 270, -1, -1));

        btnBuscar_Cliente.setBackground(new java.awt.Color(153, 204, 255));
        btnBuscar_Cliente.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        btnBuscar_Cliente.setText("Buscar");
        btnBuscar_Cliente.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBuscar_ClienteActionPerformed(evt);
            }
        });
        getContentPane().add(btnBuscar_Cliente, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 110, -1, -1));

        jPanel2.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel6.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel6.setText("Descuento:");
        jPanel2.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 50, -1, -1));

        jLabel8.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel8.setText("Cambio:");
        jPanel2.add(jLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 170, -1, -1));

        jLabel9.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel9.setText("Subtotal: ");
        jPanel2.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 10, -1, -1));

        jLabel10.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel10.setText("Total a Pagar:");
        jPanel2.add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 90, -1, -1));

        jLabel11.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel11.setText("Efectivo:");
        jPanel2.add(jLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 130, -1, -1));

        Descuento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DescuentoActionPerformed(evt);
            }
        });
        jPanel2.add(Descuento, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 50, 80, -1));
        jPanel2.add(Subtotal1, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 10, 80, -1));

        total_pagar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                total_pagarActionPerformed(evt);
            }
        });
        jPanel2.add(total_pagar, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 90, 80, -1));
        jPanel2.add(efectivo, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 130, 80, -1));

        Cambio.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CambioActionPerformed(evt);
            }
        });
        jPanel2.add(Cambio, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 170, 80, -1));

        btnCalcular_Cambio.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        btnCalcular_Cambio.setText("Calcular Cambio");
        jPanel2.add(btnCalcular_Cambio, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 160, 180, 40));

        getContentPane().add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 410, 420, 220));

        jLabel5.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel5.setText("Paquete:");
        getContentPane().add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 140, -1, -1));

        cbxPaquete.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        cbxPaquete.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione producto:" }));
        cbxPaquete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxPaqueteActionPerformed(evt);
            }
        });
        getContentPane().add(cbxPaquete, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 140, 160, -1));

        jButton1.setBackground(new java.awt.Color(153, 204, 255));
        jButton1.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jButton1.setText("Registrar Envio");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 540, 150, 90));

        jButton2.setBackground(new java.awt.Color(153, 204, 255));
        jButton2.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jButton2.setText("Buscar Lista de Objetos");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton2, new org.netbeans.lib.awtextra.AbsoluteConstraints(620, 140, -1, -1));

        Lista_objetos.setColumns(20);
        Lista_objetos.setRows(5);
        jScrollPane2.setViewportView(Lista_objetos);

        getContentPane().add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(380, 140, -1, -1));

        tblEnvio.setBackground(new java.awt.Color(153, 204, 255));
        tblEnvio.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {},
                {},
                {},
                {}
            },
            new String [] {

            }
        ));
        jScrollPane1.setViewportView(tblEnvio);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 310, 1300, 90));

        jLabel7.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel7.setText("Vehículo:");
        getContentPane().add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 170, -1, -1));

        cbxReceptoresdireccion.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        cbxReceptoresdireccion.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Seleccione dirección:" }));
        cbxReceptoresdireccion.setToolTipText("Hola");
        cbxReceptoresdireccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxReceptoresdireccionActionPerformed(evt);
            }
        });
        getContentPane().add(cbxReceptoresdireccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 200, 180, -1));

        Enviar.setBackground(new java.awt.Color(153, 204, 255));
        Enviar.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        Enviar.setText("Enviar");
        Enviar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                EnviarActionPerformed(evt);
            }
        });
        getContentPane().add(Enviar, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 270, -1, -1));

        jPanel1.setBackground(new java.awt.Color(153, 204, 255));

        jLabel1.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 1, 36)); // NOI18N
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabel1.setText("Cotización");
        jLabel1.setAlignmentY(0.1F);
        jLabel1.setDebugGraphicsOptions(javax.swing.DebugGraphics.NONE_OPTION);
        jPanel1.add(jLabel1);

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1300, 80));

        mnusuario.setBackground(new java.awt.Color(255, 204, 204));
        mnusuario.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/userLabel.png"))); // NOI18N
        mnusuario.setText("Usuario");
        mnusuario.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemusuario.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemusuario.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/userLabel.png"))); // NOI18N
        mnitemusuario.setText("Registro de usuario");
        mnusuario.add(mnitemusuario);

        jMenuBar1.add(mnusuario);

        mnpaquete.setBackground(new java.awt.Color(153, 204, 255));
        mnpaquete.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/box.png"))); // NOI18N
        mnpaquete.setText("Paquete");
        mnpaquete.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitempaquete.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitempaquete.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/box.png"))); // NOI18N
        mnitempaquete.setText("Registro de paquete");
        mnpaquete.add(mnitempaquete);

        jMenuBar1.add(mnpaquete);

        jMenu3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/receiver.png"))); // NOI18N
        jMenu3.setText("Receptor");
        jMenu3.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemreceptor.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemreceptor.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/receiver.png"))); // NOI18N
        mnitemreceptor.setText("Registrar receptor");
        jMenu3.add(mnitemreceptor);

        jMenuBar1.add(jMenu3);

        jMenu4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/users-avatar.png"))); // NOI18N
        jMenu4.setText("Cliente");
        jMenu4.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemcliente.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemcliente.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/users-avatar.png"))); // NOI18N
        mnitemcliente.setText("Registrar cliente");
        jMenu4.add(mnitemcliente);

        jMenuBar1.add(jMenu4);

        mntransporte.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/truck.png"))); // NOI18N
        mntransporte.setText("Transporte");
        mntransporte.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemtransporte.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemtransporte.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/truck.png"))); // NOI18N
        mnitemtransporte.setText("Registrar un nuevo transporte");
        mntransporte.add(mnitemtransporte);

        jMenuBar1.add(mntransporte);

        mnequipo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/computer.png"))); // NOI18N
        mnequipo.setText("Equipo");
        mnequipo.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemequipo.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemequipo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/computer.png"))); // NOI18N
        mnitemequipo.setText("Registrar un nuevo equipo al inventario");
        mnequipo.add(mnitemequipo);

        jMenuBar1.add(mnequipo);

        mnsucursal.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/office.png"))); // NOI18N
        mnsucursal.setText("Sucursal");
        mnsucursal.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemsucursal.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemsucursal.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/office.png"))); // NOI18N
        mnitemsucursal.setText("Registrar nueva sucursal.");
        mnsucursal.add(mnitemsucursal);

        jMenuBar1.add(mnsucursal);

        mnconductor.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/driver.png"))); // NOI18N
        mnconductor.setText("Conductores");
        mnconductor.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mniemconductor.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mniemconductor.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/driver.png"))); // NOI18N
        mniemconductor.setText("Registrar un nuevo conductor.");
        mnconductor.add(mniemconductor);

        jMenuBar1.add(mnconductor);

        jMenu2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/pay.png"))); // NOI18N
        jMenu2.setText("Pago");
        jMenu2.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        jRadioButtonMenuItem2.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        jRadioButtonMenuItem2.setSelected(true);
        jRadioButtonMenuItem2.setText("Registro de pago.");
        jRadioButtonMenuItem2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/pay.png"))); // NOI18N
        jMenu2.add(jRadioButtonMenuItem2);

        jMenuBar1.add(jMenu2);

        jMenu1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/operator.png"))); // NOI18N
        jMenu1.setText("consultaequipo");
        jMenu1.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        jCheckBoxMenuItem2.setSelected(true);
        jCheckBoxMenuItem2.setText("Consultausuario");
        jCheckBoxMenuItem2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/userLabel.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem2);

        jCheckBoxMenuItem3.setSelected(true);
        jCheckBoxMenuItem3.setText("Consultacliente");
        jCheckBoxMenuItem3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/users-avatar.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem3);

        jCheckBoxMenuItem5.setSelected(true);
        jCheckBoxMenuItem5.setText("Consultafactura");
        jCheckBoxMenuItem5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/invoice.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem5);

        jCheckBoxMenuItem7.setSelected(true);
        jCheckBoxMenuItem7.setText("Consultacotizacion");
        jCheckBoxMenuItem7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/bill.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem7);

        jCheckBoxMenuItem8.setSelected(true);
        jCheckBoxMenuItem8.setText("Consultaequipo");
        jCheckBoxMenuItem8.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/computer.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem8);

        consultatransporte.setSelected(true);
        consultatransporte.setText("consultapaquete");
        consultatransporte.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/box.png"))); // NOI18N
        jMenu1.add(consultatransporte);

        consultaconductores.setSelected(true);
        consultaconductores.setText("Consultatransporte");
        consultaconductores.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/truck.png"))); // NOI18N
        jMenu1.add(consultaconductores);

        Consultaempleados.setSelected(true);
        Consultaempleados.setText("Consultapago");
        Consultaempleados.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/pay.png"))); // NOI18N
        jMenu1.add(Consultaempleados);

        jCheckBoxMenuItem11.setSelected(true);
        jCheckBoxMenuItem11.setText("consultapaquetesenelinventario");
        jCheckBoxMenuItem11.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/box.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem11);

        jCheckBoxMenuItem12.setSelected(true);
        jCheckBoxMenuItem12.setText("consultaempleados");
        jCheckBoxMenuItem12.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/users-avatar.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem12);

        jCheckBoxMenuItem10.setSelected(true);
        jCheckBoxMenuItem10.setText("consultasucursal");
        jCheckBoxMenuItem10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/office.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem10);

        jCheckBoxMenuItem1.setSelected(true);
        jCheckBoxMenuItem1.setText("consultaconductores");
        jCheckBoxMenuItem1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/driver.png"))); // NOI18N
        jMenu1.add(jCheckBoxMenuItem1);

        jRadioButtonMenuItem1.setSelected(true);
        jRadioButtonMenuItem1.setText("Consulta receptores.");
        jRadioButtonMenuItem1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/receiver.png"))); // NOI18N
        jMenu1.add(jRadioButtonMenuItem1);

        jMenuBar1.add(jMenu1);

        mnsalir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/logout.png"))); // NOI18N
        mnsalir.setText("Salir");
        mnsalir.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N

        mnitemsalir.setFont(new java.awt.Font("Franklin Gothic Medium Cond", 0, 14)); // NOI18N
        mnitemsalir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Images/logout.png"))); // NOI18N
        mnitemsalir.setText("Salir.");
        mnsalir.add(mnitemsalir);

        jMenuBar1.add(mnsalir);

        setJMenuBar(jMenuBar1);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void cbxVehiculoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxVehiculoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbxVehiculoActionPerformed

    private void cbxClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxClienteActionPerformed
        
    }//GEN-LAST:event_cbxClienteActionPerformed

    private void btnAnadirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAnadirActionPerformed
DefaultTableModel modelo = (DefaultTableModel) tblEnvio.getModel();
Conexion mysql = new Conexion();
java.sql.Connection cn = mysql.Conectar();

String query = "SELECT * FROM cotizacion;";

try {
    PreparedStatement st = cn.prepareStatement(query);
    
    ResultSet rs = st.executeQuery();
    
    // Limpiar el modelo de la tabla antes de agregar nuevas columnas
    modelo.setRowCount(0);
    modelo.setColumnCount(0);
    
    // Crear el modelo de tabla
    modelo.addColumn("CotizacionID");
    modelo.addColumn("fecha_cotizacion");
    modelo.addColumn("Cliente_ID");
    modelo.addColumn("NumeroDePaquete");
    modelo.addColumn("ListaDeObjetos");
    modelo.addColumn("CantidadTotalObjetos");
    modelo.addColumn("PlacaVehiculo");
    modelo.addColumn("DomicilioReceptor");
    
    // Llenar el modelo de tabla con los datos
    while (rs.next()) {
        Object[] row = new Object[8];
        row[0] = rs.getString("CotizacionID");
        row[1] = rs.getString("fecha_cotizacion");
        row[2] = rs.getString("Cliente_ID");
        row[3] = rs.getString("NumeroDePaquete");
        row[4] = rs.getString("ListaDeObjetos");
        row[5] = rs.getInt("CantidadTotalObjetos");
        row[6] = rs.getString("PlacaVehiculo");
        row[7] = rs.getString("DomicilioReceptor");
        modelo.addRow(row);
    }
    
    // Asignar el modelo de tabla a la tabla
    tblEnvio.setModel(modelo);
    
} catch (SQLException ex) {
    ex.printStackTrace();
}

           
    }//GEN-LAST:event_btnAnadirActionPerformed

    private void btnBuscar_ClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBuscar_ClienteActionPerformed
String clienteID = buscarCliente.getText().trim();
Conexion mysql = new Conexion();
java.sql.Connection cn = mysql.Conectar();
PreparedStatement st;
String sql = "SELECT Nombre, Apellido FROM clientes WHERE ClienteID = ?";
try {
    st = cn.prepareStatement(sql);
    st.setString(1, clienteID);
    ResultSet rsCliente = st.executeQuery();
    if (rsCliente.next()) {
        String nombreCompleto = rsCliente.getString("Nombre") + " " + rsCliente.getString("Apellido");
        cbxCliente.setSelectedItem(nombreCompleto);
        sql = "SELECT NumeroDePaquete FROM paquetes WHERE ClienteID = ?";
        st = cn.prepareStatement(sql);
        st.setString(1, clienteID);
        ResultSet rsPaquete = st.executeQuery();
        cbxPaquete.removeAllItems();
        while (rsPaquete.next()) {
            String paqueteID = rsPaquete.getString("NumeroDePaquete");
            cbxPaquete.addItem(paqueteID);
        }
        if (cbxPaquete.getItemCount() == 0) {
            cbxPaquete.addItem("Seleccione paquete");
            JOptionPane.showMessageDialog(null, "No se encontraron paquetes para este cliente");
        } else {
            cbxPaquete.setSelectedIndex(0);
        }

        // Buscar ReceptorID por dirección del receptor
        sql = "SELECT ReceptorID FROM receptores WHERE Domicilio = ?";
        st = cn.prepareStatement(sql);
        st.setString(1, cbxReceptoresdireccion.getSelectedItem().toString());
        ResultSet rsReceptor = st.executeQuery();
        if (rsReceptor.next()) {
            String receptorID = rsReceptor.getString("ReceptorID");
            // Aquí puedes mostrar el ReceptorID o realizar otras acciones
            System.out.println("ReceptorID: " + receptorID);
        } else {
            // Manejar el caso cuando no se encuentre el receptor
        }
    } else {
        cbxCliente.setSelectedItem("Seleccione cliente");
        cbxPaquete.removeAllItems();
        cbxPaquete.addItem("Seleccione paquete");
        JOptionPane.showMessageDialog(null, "Cédula no encontrada");
    }
    cn.close();
} catch (SQLException e) {
    System.out.println("Error al buscar cliente, paquete y receptor: " + e);
}
    }//GEN-LAST:event_btnBuscar_ClienteActionPerformed

    private void cbxPaqueteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxPaqueteActionPerformed
        
    }//GEN-LAST:event_cbxPaqueteActionPerformed

    private void DescuentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DescuentoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_DescuentoActionPerformed

    private void total_pagarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_total_pagarActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_total_pagarActionPerformed

    private void CambioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CambioActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_CambioActionPerformed

    private void buscarClienteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buscarClienteActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_buscarClienteActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
String paqueteID = cbxPaquete.getSelectedItem().toString();
Conexion mysql = new Conexion();
java.sql.Connection cn = mysql.Conectar();
PreparedStatement st;
String sql = "SELECT ListaDeObjetos FROM paquetes WHERE NumeroDePaquete = ?";
try {
    st = cn.prepareStatement(sql);
    st.setString(1, paqueteID);
    ResultSet rs = st.executeQuery();
    StringBuilder objetosConcatenados = new StringBuilder();
    
    while (rs.next()) {
        if (objetosConcatenados.length() > 0) {
            objetosConcatenados.append(", ");
        }
        objetosConcatenados.append(rs.getString("ListaDeObjetos"));
    }
    
    if (objetosConcatenados.length() > 0) {
        Lista_objetos.setText(objetosConcatenados.toString());
    } else {
        Lista_objetos.setText("");
        JOptionPane.showMessageDialog(null, "Paquete no encontrado");
    }
    
    cn.close();
} catch (SQLException e) {
    System.out.println("Error al buscar el paquete: " + e);
}
        
    }//GEN-LAST:event_jButton2ActionPerformed

    private void cbxReceptoresdireccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxReceptoresdireccionActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbxReceptoresdireccionActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton1ActionPerformed

    private void EnviarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_EnviarActionPerformed

    guardarCotizacion();
}

private void guardarCotizacion() {
    String clienteID = buscarCliente.getText();
    String numeroPaquete = cbxPaquete.getSelectedItem().toString();
    String listaObjetos = Lista_objetos.getText();
    int cantidadObjetos = contarObjetosLista(listaObjetos);
    String placaVehiculo = cbxVehiculo.getSelectedItem().toString();
    String domicilioReceptor = cbxReceptoresdireccion.getSelectedItem().toString();

    // Generar la fecha actual
    java.sql.Date fechaCotizacion = new java.sql.Date(System.currentTimeMillis());

    Conexion mysql = new Conexion();
    java.sql.Connection cn = mysql.Conectar();
    PreparedStatement st;
    String sql = "INSERT INTO cotizacion (fecha_cotizacion, Cliente_ID, NumeroDePaquete, ListaDeObjetos, CantidadTotalObjetos, PlacaVehiculo, DomicilioReceptor) VALUES (?, ?, ?, ?, ?, ?, ?)";

    try {
        st = cn.prepareStatement(sql);
        st.setDate(1, fechaCotizacion);
        st.setString(2, clienteID);
        st.setString(3, numeroPaquete);
        st.setString(4, listaObjetos);
        st.setInt(5, cantidadObjetos);
        st.setString(6, placaVehiculo);
        st.setString(7, domicilioReceptor);
        st.executeUpdate();
        JOptionPane.showMessageDialog(null, "Cotización guardada correctamente");
    } catch (SQLException e) {
        System.out.println("Error al guardar la cotización: " + e);
    }
}

private int contarObjetosLista(String listaObjetos) {
    // Separar la lista de objetos por comas y contar el número de elementos
    String[] objetos = listaObjetos.split(",");
    return objetos.length;



    }//GEN-LAST:event_EnviarActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Facturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Facturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Facturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Facturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Facturacion().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField Cambio;
    private javax.swing.JCheckBoxMenuItem Consultaempleados;
    private javax.swing.JTextField Descuento;
    private javax.swing.JButton Enviar;
    private javax.swing.JTextArea Lista_objetos;
    private javax.swing.JTextField Subtotal1;
    private javax.swing.JButton btnAnadir;
    private javax.swing.JButton btnBuscar_Cliente;
    private javax.swing.JButton btnCalcular_Cambio;
    private javax.swing.JTextField buscarCliente;
    private javax.swing.JComboBox<String> cbxCliente;
    private javax.swing.JComboBox<String> cbxPaquete;
    private javax.swing.JComboBox<String> cbxReceptoresdireccion;
    private javax.swing.JComboBox<String> cbxVehiculo;
    private javax.swing.JCheckBoxMenuItem consultaconductores;
    private javax.swing.JCheckBoxMenuItem consultatransporte;
    private javax.swing.JTextField efectivo;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem1;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem10;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem11;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem12;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem2;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem3;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem5;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem7;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem8;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenu jMenu4;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem1;
    private javax.swing.JRadioButtonMenuItem jRadioButtonMenuItem2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JMenu mnconductor;
    private javax.swing.JMenu mnequipo;
    private javax.swing.JMenuItem mniemconductor;
    private javax.swing.JMenuItem mnitemcliente;
    private javax.swing.JMenuItem mnitemequipo;
    private javax.swing.JMenuItem mnitempaquete;
    private javax.swing.JMenuItem mnitemreceptor;
    private javax.swing.JMenuItem mnitemsalir;
    private javax.swing.JMenuItem mnitemsucursal;
    private javax.swing.JMenuItem mnitemtransporte;
    private javax.swing.JMenuItem mnitemusuario;
    private javax.swing.JMenu mnpaquete;
    private javax.swing.JMenu mnsalir;
    private javax.swing.JMenu mnsucursal;
    private javax.swing.JMenu mntransporte;
    private javax.swing.JMenu mnusuario;
    public static javax.swing.JTable tblEnvio;
    private javax.swing.JTextField total_pagar;
    // End of variables declaration//GEN-END:variables


private void CargarClientes(){
        ModeloClientes modClientes = new ModeloClientes();
        ArrayList<Clientes> listaClientes = modClientes.obtenerClientes();

        for (Clientes cliente : listaClientes) {
            cbxCliente.addItem(cliente.getNombre() + " " + cliente.getApellido());
        }


}

private void llenarPaquetes(){

ModeloPaquetes modPaquetes = new ModeloPaquetes();
        ArrayList<Paquetes> listaPaquetes = modPaquetes.obtenerPaquetes();


        for (Paquetes paquete : listaPaquetes) {
            cbxPaquete.addItem(paquete.getNumeroDePaquete());
        }
}
private void llenarTransporte() {
        ModeloTransporte modVehiculos = new ModeloTransporte();
        ArrayList<Transporte> listaTransporte = modVehiculos.obtenerTransporte();


        for (Transporte transporte : listaTransporte) {
            cbxVehiculo.addItem(transporte.getNumeroPlaca() + " " + transporte.getModelo());
            
        }
        
        
    }

private void cargarReceptores() {
    ModeloReceptores modReceptores = new ModeloReceptores();
    ArrayList<Receptores> listaReceptores = modReceptores.obtenerReceptores();
    for (Receptores receptor : listaReceptores) {
        cbxReceptoresdireccion.addItem(receptor.getDomicilio());
    }
}
}


